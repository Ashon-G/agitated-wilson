{
  "schedulers": [
    {
      "name": "autonomous-reddit-agent",
      "description": "Posts comments autonomously every 30 minutes",
      "schedule": "*/30 * * * *",
      "timeZone": "America/Los_Angeles",
      "targetType": "pubsub",
      "topic": "firebase-schedule-autonomousRedditAgent-us-central1",
      "payload": {},
      "retryConfig": {
        "retryCount": 3,
        "maxRetryDuration": "600s",
        "minBackoffDuration": "5s",
        "maxBackoffDuration": "3600s",
        "maxDoublings": 5
      },
      "function": "autonomousRedditAgent",
      "timeout": "540s",
      "memory": "512MB"
    },
    {
      "name": "reddit-reply-monitor",
      "description": "Checks for Reddit replies every 15 minutes",
      "schedule": "*/15 * * * *",
      "timeZone": "America/Los_Angeles",
      "targetType": "pubsub",
      "topic": "firebase-schedule-redditReplyMonitor-us-central1",
      "payload": {},
      "retryConfig": {
        "retryCount": 3,
        "maxRetryDuration": "600s",
        "minBackoffDuration": "5s",
        "maxBackoffDuration": "3600s",
        "maxDoublings": 5
      },
      "function": "redditReplyMonitor",
      "timeout": "540s",
      "memory": "256MB"
    },
    {
      "name": "process-task-queue",
      "description": "Processes background task queue every 5 minutes",
      "schedule": "*/5 * * * *",
      "timeZone": "America/Los_Angeles",
      "targetType": "pubsub",
      "topic": "firebase-schedule-processTaskQueue-us-central1",
      "payload": {},
      "retryConfig": {
        "retryCount": 2,
        "maxRetryDuration": "300s",
        "minBackoffDuration": "5s",
        "maxBackoffDuration": "1800s",
        "maxDoublings": 4
      },
      "function": "processTaskQueue",
      "timeout": "540s",
      "memory": "512MB"
    },
    {
      "name": "cleanup-old-tasks",
      "description": "Cleans up old completed/failed tasks daily",
      "schedule": "0 2 * * *",
      "timeZone": "America/Los_Angeles",
      "targetType": "pubsub",
      "topic": "firebase-schedule-cleanupOldTasks-us-central1",
      "payload": {},
      "retryConfig": {
        "retryCount": 1,
        "maxRetryDuration": "300s",
        "minBackoffDuration": "10s",
        "maxBackoffDuration": "600s",
        "maxDoublings": 3
      },
      "function": "cleanupOldTasks",
      "timeout": "540s",
      "memory": "256MB"
    }
  ],
  "deploymentInstructions": {
    "gcloud": [
      "# Deploy all Cloud Schedulers",
      "# Make sure to replace PROJECT_ID and REGION with your values",
      "",
      "# 1. Autonomous Reddit Agent (every 30 minutes)",
      "gcloud scheduler jobs create pubsub autonomous-reddit-agent \\",
      "  --schedule='*/30 * * * *' \\",
      "  --time-zone='America/Los_Angeles' \\",
      "  --topic='firebase-schedule-autonomousRedditAgent-us-central1' \\",
      "  --message-body='{}' \\",
      "  --description='Posts comments autonomously every 30 minutes' \\",
      "  --max-retry-attempts=3 \\",
      "  --max-retry-duration=600s \\",
      "  --min-backoff=5s \\",
      "  --max-backoff=3600s \\",
      "  --max-doublings=5 \\",
      "  --project=PROJECT_ID \\",
      "  --location=REGION",
      "",
      "# 2. Reddit Reply Monitor (every 15 minutes)",
      "gcloud scheduler jobs create pubsub reddit-reply-monitor \\",
      "  --schedule='*/15 * * * *' \\",
      "  --time-zone='America/Los_Angeles' \\",
      "  --topic='firebase-schedule-redditReplyMonitor-us-central1' \\",
      "  --message-body='{}' \\",
      "  --description='Checks for Reddit replies every 15 minutes' \\",
      "  --max-retry-attempts=3 \\",
      "  --max-retry-duration=600s \\",
      "  --min-backoff=5s \\",
      "  --max-backoff=3600s \\",
      "  --max-doublings=5 \\",
      "  --project=PROJECT_ID \\",
      "  --location=REGION",
      "",
      "# 3. Process Task Queue (every 5 minutes)",
      "gcloud scheduler jobs create pubsub process-task-queue \\",
      "  --schedule='*/5 * * * *' \\",
      "  --time-zone='America/Los_Angeles' \\",
      "  --topic='firebase-schedule-processTaskQueue-us-central1' \\",
      "  --message-body='{}' \\",
      "  --description='Processes background task queue every 5 minutes' \\",
      "  --max-retry-attempts=2 \\",
      "  --max-retry-duration=300s \\",
      "  --min-backoff=5s \\",
      "  --max-backoff=1800s \\",
      "  --max-doublings=4 \\",
      "  --project=PROJECT_ID \\",
      "  --location=REGION",
      "",
      "# 4. Cleanup Old Tasks (daily at 2 AM)",
      "gcloud scheduler jobs create pubsub cleanup-old-tasks \\",
      "  --schedule='0 2 * * *' \\",
      "  --time-zone='America/Los_Angeles' \\",
      "  --topic='firebase-schedule-cleanupOldTasks-us-central1' \\",
      "  --message-body='{}' \\",
      "  --description='Cleans up old completed/failed tasks daily' \\",
      "  --max-retry-attempts=1 \\",
      "  --max-retry-duration=300s \\",
      "  --min-backoff=10s \\",
      "  --max-backoff=600s \\",
      "  --max-doublings=3 \\",
      "  --project=PROJECT_ID \\",
      "  --location=REGION"
    ],
    "notes": [
      "Cloud Scheduler jobs are automatically created when you deploy Firebase Functions with schedule triggers",
      "The above gcloud commands are for manual creation or updates",
      "Use 'firebase deploy --only functions' to deploy all scheduled functions",
      "View schedulers: gcloud scheduler jobs list --project=PROJECT_ID",
      "Pause scheduler: gcloud scheduler jobs pause JOB_NAME --project=PROJECT_ID",
      "Resume scheduler: gcloud scheduler jobs resume JOB_NAME --project=PROJECT_ID",
      "Delete scheduler: gcloud scheduler jobs delete JOB_NAME --project=PROJECT_ID"
    ]
  }
}
